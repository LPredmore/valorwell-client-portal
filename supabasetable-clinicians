-- Create required ENUMs
CREATE TYPE public.clinician_status_enum AS ENUM (
  'New',
  'Active',
  'Available',
  'Unavailable',
  'Inactive',
  'Pending'
);

CREATE TYPE public.app_role AS ENUM (
  'admin',
  'client',
  'clinician'
);

-- Create clinicians table
CREATE TABLE public.clinicians (
  id uuid NOT NULL,
  clinician_phone text,
  clinician_bio text,
  clinician_treatment_approaches text[],
  clinician_min_client_age integer DEFAULT 18,
  clinician_accepting_new_clients text,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  updated_at timestamp with time zone NOT NULL DEFAULT now(),
  clinician_type text,
  clinician_license_type text,
  clinician_npi_number text,
  clinician_taxonomy_code text,
  clinician_professional_name text,
  clinician_image_url text,
  clinician_first_name text,
  clinician_last_name text,
  clinician_email text,
  clinician_state text[],
  clinician_licensed_states text[] DEFAULT '{}'::text[],
  clinician_status clinician_status_enum DEFAULT 'New'::clinician_status_enum,
  clinician_nameinsurance text,
  clinician_temppassword text,
  CONSTRAINT clinicians_pkey PRIMARY KEY (id)
);

-- Create clinician_licenses table (related table)
CREATE TABLE public.clinician_licenses (
  id uuid NOT NULL DEFAULT extensions.uuid_generate_v4(),
  clinician_id uuid,
  license_type text,
  license_number text,
  state text,
  issue_date date,
  expiration_date date,
  status text,
  verification_date date,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now()
);

-- Add a comment explaining the clinicians table
COMMENT ON TABLE public.clinicians IS 'Stores information about healthcare providers/clinicians in the system';

-- Add comments for important columns
COMMENT ON COLUMN public.clinicians.id IS 'Primary key that matches the profile ID of the clinician';
COMMENT ON COLUMN public.clinicians.clinician_status IS 'Current status of the clinician (New, Active, Available, etc.)';
COMMENT ON COLUMN public.clinicians.clinician_professional_name IS 'The clinician''s professional name used in formal contexts';
COMMENT ON COLUMN public.clinicians.clinician_treatment_approaches IS 'Array of treatment approaches/specialties of the clinician';
COMMENT ON COLUMN public.clinicians.clinician_licensed_states IS 'States where the clinician is licensed to practice';










Table Description
The clinicians table stores detailed information about healthcare providers in the system. This table works in conjunction with the profiles table, which contains the basic user information, and the clinician_licenses table, which stores licensing details for each clinician.

Key Relationships
Profiles Table: There's a one-to-one relationship between clinicians and profiles tables using the id field. The id in the clinicians table corresponds to the id in the profiles table where role equals 'clinician'.

Clinician Licenses: The clinician_licenses table contains professional license information for clinicians. It references the clinicians table via the clinician_id field.

Calendar Events: The calendar_events table references clinicians through the clinician_id field, enabling the calendar functionality to track clinician availability and appointments.

Important Columns
id: Primary key (UUID) that matches the corresponding entry in the profiles table
clinician_status: Enum field tracking the clinician's current status (New, Active, Available, Unavailable, Inactive, Pending)
clinician_first_name/clinician_last_name: The clinician's personal name
clinician_professional_name: The name used professionally, potentially different from the personal name
clinician_email: The clinician's email address
clinician_licensed_states: Array of states where the clinician is licensed to practice
clinician_treatment_approaches: Array of treatment methodologies/specialties
clinician_min_client_age: Minimum age of clients the clinician works with (defaults to 18)
Additional Information
The clinicians table has several system-level functions that reference it, including functions for validating clinician IDs and checking calendar health.
Several validation systems are in place to ensure UUID format consistency across the database, particularly for the id field.
The table is used in conjunction with the calendar_events table for managing clinician availability and appointments.